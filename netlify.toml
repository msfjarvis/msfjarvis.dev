[dev]
command = "hugo serve"
targetPort = 1313
port = 8888
publish = "public"
autoLaunch = false

[build.environment]
HUGO_VERSION = "0.145.0"
NODE_VERSION = "18"

[[edge_functions]]
path = "/*"
function = "root"

[[redirects]]
from = "/robots.txt"
to = "/robots.txt"
status = 200

[[redirects]]
from = "/sitemap.xml"
to = "/sitemap.xml"
status = 200

[[headers]]
for = "/*"
[headers.values]
Content-Security-Policy = "script-src identity.netlify.com insights.msfjarvis.dev msfjarvis.dev 'unsafe-inline'"
Referrer-Policy = 'strict-origin-when-cross-origin'
X-Content-Type-Options = "nosniff"
X-Frame-Options = "DENY"
X-XSS-Protection = '1; mode=block'

[[headers]]
for = "/admin/*"
[headers.values]
Content-Security-Policy = "script-src identity.netlify.com unpkg.com 'unsafe-inline' 'unsafe-eval'"
Referrer-Policy = 'strict-origin-when-cross-origin'
X-Content-Type-Options = "nosniff"
X-Frame-Options = "DENY"
X-XSS-Protection = '1; mode=block'

[[headers]]
for = "/pretty-feed-v3.xsl"
[headers.values]
Content-Type = "application/xml; charset=utf-8"

[[headers]]
for = "/@blog"
[headers.values]
Content-Type = "application/activity+json; charset=utf-8"

[[headers]]
for = "/outbox.ajson"
[headers.values]
Content-Type = "application/activity+json; charset=utf-8"
